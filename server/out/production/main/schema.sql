CREATE TABLE users (
      id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
      username VARCHAR(255) NOT NULL,
      name VARCHAR(255) NULL,
      email VARCHAR(255) NOT NULL,
      password VARCHAR(255) NOT NULL,
      authToken VARCHAR(255),
      avatar VARCHAR(255) NULL,
      created_at timestamp DEFAULT CURRENT_TIMESTAMP,
      updated_at timestamp DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE roles (
      id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
      name VARCHAR(255) NULL
);

CREATE TABLE timers (
      id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
      title VARCHAR(255) NULL,
      start_at timestamp DEFAULT CURRENT_TIMESTAMP,
      end_at timestamp NULL,
      created_at timestamp DEFAULT CURRENT_TIMESTAMP,
      updated_at timestamp DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE user_roles (
      id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
      user_id INTEGER NOT NULL,
      role_id INTEGER NOT NULL
);

CREATE TABLE user_timers (
      id INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
      user_id INTEGER NOT NULL,
      timer_id INTEGER NOT NULL
);

INSERT INTO roles(name) VALUES('ROLE_USER');
INSERT INTO roles(name) VALUES('ROLE_ADMIN');

INSERT INTO users(username, name, email, password) VALUES('testuser', 'Test User', 'test@test.ee', '$2a$10$bAtlktEzHZAOjSTi2X53uOpI7JyjlZ8PPYgwn5IIdaX7mxP96d9Uq');
INSERT INTO user_roles(user_id, role_id) VALUES(1, 1);
